<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="../style.css" />
    <title>Register - Turtle84375</title>
    <meta name="description" content="Turtle84375 - Web developer, administrator, gamer, waster of money">
    <meta name="keywords" content="turtle84375">
    <script>
      if (document.cookie !== "") {
        window.location.href = "dashboard";
      }
    </script>
  </head>
  <body>
    <!-- Heading presentation -->
    <div class="title-parent">
      <span class="title">Register</span>
	<br>
	<br>
	<form method="POST" action="https://auth.turtle84375.me/register">
		<label for="username">Username</label>
		<br>
		<input id="uname" type="name" name="username" placeholder="Choose your username...">
		<br>
		<br>
		<label for="password">Password: </label>
		<br>
		<input id="pwd" type="password" name="password" placeholder="Type your password...">
		<br>
		<label for="password-confirm">Confirm Password: </label>
		<br>
		<input id="pwd-confirm" type="password" name="password-confirm" placeholder="Retype your password...">
		<br>
		<br>
		<label for="username">Email (optional)</label>
		<br>
		<input id="email" type="email" name="email" placeholder="Type your email...">
		<br>
		<br>
		<input id="submit" type="submit" value="Register" disabled>
    	</form>
	<br>
	<p id="errorMessage" class="error"></p>
    </div>
    <script>
      document.getElementById("uname").addEventListener("input", check);
      document.getElementById("pwd").addEventListener("input", check);
	    
      var url_string = window.location.href;
      var url = new URL(url_string);
      var error = url.searchParams.get("error");
      if (error == "1") {
        document.getElementById("errorMessage").innerHTML = "Username is already taken!";
      } else if (error == "2") {
	document.getElementById("errorMessage").innerHTML = "Registration is disabled, try again later!";
      } else if (error =="3") {
	document.getElementById("errorMessage").innerHTML = "Username is not allowed!";
      } else {
        document.getElementById("errorMessage").style.hidden = true;
      }
	    
      function check() {
	if (document.getElementById("uname").value !== "" && document.getElementById("pwd").value !== "") {
	  document.getElementById("submit").disabled = false;
        } else {
	  document.getElementById("submit").disabled = true;
	}
      }
    </script>
  </body>
</html>
